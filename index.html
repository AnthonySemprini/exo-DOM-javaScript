<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>Document</title>
</head>
<body>

    <div id="board"></div>
    <span id="timer"></span>

    <script>

        //fonction melange

      function shuffleChildren(parent){
            let children = parent.children
            let i = children.length, k , temp
            while(--i > 0 ){
                k = Math.floor(Math.random() * (i+1))
                temp = children[k]
                children[k] = children[i]
                parent.appendChild(temp)
            }
        }
        //function color les box en fonction de success error ou notice

        function schowReaction(type, clickBox){
            clickBox.classList.add(type)
            if(type !=="succes"){
                setTimeout(function(){
                    clickBox.classList.remove(type)

                },800)
            }
        }
       // creation des 10 box

       const box = document.createElement("div")
       box.classList.add("box") 

       const board = document.querySelector("#board")

       let nb = 1
       
       for(let i = 1; i <=10; i++){
        let  newbox = box.cloneNode()
        newbox.innerText = i
        board.appendChild(newbox)
       
        // boucle pour changer les couleur en fonction de success error et notice

       newbox.addEventListener("click",function(){
        if(i== nb){
            newbox.classList.add("box-valid")
            //1
            if(nb == board.children.length){
               board.querySelectorAll(".box").forEach(function(box){
                schowReaction("success", box)
            })
        }
        nb++
    }
    //2
    else if(i >nb ){
        schowReaction("error", newbox)
        nb = 1
        board.querySelectorAll(".box-valid").forEach(function(validBox){
            validBox.classList.remove("box-valid")
                shuffleChildren(board)
                })
            }
            //3
            else(
                schowReaction("notice", newbox)
            )
       })
       }
       shuffleChildren(board)

       // melange aleatoire des box

       let i = board.children.length, k , temp
       while (--i > 0) { //on boucle tant que 1 oté de i est tj positif
        // k stock un nmobre aleatoire base sur i
        k = Math.floor(Math.random()*(i+1))
        //temp pointe temporairement l'relement a la position k dans la board
        temp = board.children[k]
        //remplace l'element a lma position k par l'element a la position i
        board.children[k] = board.children[i]
        //place l'element k pointé temporairement a la fin du contenue de board
        board.appendChild(temp)
       }
       prompt("Saisissez le chiffre de départ")
    </script>
    
</body>
</html>